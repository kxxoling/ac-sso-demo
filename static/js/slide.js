// Generated by CoffeeScript 1.8.0
(function() {
  var html;

  html = $("html");

  $.slide = function(option) {
    var bg, body, main, slide, top, width;
    if ($._slide) {
      $.slide.close(function() {
        return $.slide(option);
      });
      return;
    }
    bg = $("#MAIN");
    body = $("body");
    width = option.width;
    $._slide = slide = $("<div id=\"slideDown\"><div id=\"slide\" style=\"width:" + width + "px;margin-right:-" + (width + 6) + "px\">" + option.html + "</div></div>");
    body.append(slide);
    if (typeof option.before_slide === "function") {
      option.before_slide();
    }
    bg.addClass("slideBlur");
    setTimeout((function() {
      return $("#slide").css("margin-right", 0);
    }));
    main = $("#MAIN");
    top = -html.scrollTop();
    main.css({
      marginTop: top
    });
    html.css('overflow', "hidden");
    setTimeout((function() {
      if (typeof option.after_show === "function") {
        option.after_show();
      }
      return $("#slideDown").click(function(e) {
        if (e.target === this) {
          bg.removeClass("slideBlur");
          return $.slide.close();
        }
      });
    }));
    return $.slide.close = function(callback) {
      if (option != null) {
        option.before_close();
      }
      $._slide.remove();
      delete $._slide;
      html.css({
        overflow: "visible"
      });
      main.css({
        marginTop: 0
      });
      if (typeof callback === "function") {
        return callback();
      } else {
        return void 0;
      }
    };
  };

  $.slide.close = function() {};

}).call(this);

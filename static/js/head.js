// Generated by CoffeeScript 1.8.0
(function() {
  window.headL = function() {
    return document.write("<div class=\"L\">\n<a class=\"logo\" href=\"//" + CONST.HOST + "\"></a>\n<form method=\"get\" action=\"http://www.baidu.com/baidu\" target=\"_blank\" class=\"search_form\">\n<input id=\"search\" name=\"word\">\n<input name=\"si\" type=\"hidden\" value=\"" + CONST.HOST + "\">\n<input name=\"ct\" type=\"hidden\" value=2097152>\n<input name=ie type=hidden value=utf-8>\n</form>\n</div>");
  };

  window.headBar = function() {
    return document.write("<div id=\"headBar\">本站推荐使用<a target=\"_blank\" href=\"http://dwz.cn/wuLlU\" class=\"jd\">Retina屏的MacBook</a>浏览以获得最佳效果。 太贵买不起?<a href=\"//help." + CONST.HOST + "/union\" class=\"union\">来赚稿费吧</a>^_^<a href=\"javascript:$('#headBar').slideUp();void(0)\" class=\"rm\"></a></div>");
  };

  window.render_head_ico = function(id) {
    var height, ico;
    if (id) {
      ico = $("#HEAD .menu .ico");
      height = parseInt(devicePixelRatio * ico.height());
      return ico.css("background-image", "url(" + CONST.SSO.QINIU + "/" + id + "?imageView2/5/w/" + height + "/h/" + height + ")");
    } else {
      return $(function() {
        return $$('SSO/profile');
      });
    }
  };

  if ($.current_user_id) {
    $(function() {
      var box, menu;
      box = $("<div class=\"box\"><a class=\"user\" href=\"//" + $.current_user_id + "." + CONST.HOST + "\">个人中心</a><a href=\"javascript:$$('SSO/profile');void(0)\" class=\"setting\" href=\"\">账号设置</a><a class=\"fav\" href=\"\">我的收藏</a><a class=\"logout\" href=\"javascript:$$('SSO/user.logout');void(0)\">退出账号</a></div>");
      menu = $('#HEAD .menu').poshytip({
        alignTo: 'target',
        offsetX: -39,
        className: "tip-menu",
        offsetY: 20,
        content: box,
        afterShow: function() {
          return alert(1);
        }
      });
      return box.find("a").click(function() {
        return menu.poshytip("hide");
      });
    });
  }

  $(function() {
    var i, search, search_placeholder, txt;
    search = $("#search");
    txt = "我们见证未来";
    i = 0;
    search_placeholder = function() {
      search.attr('placeholder', txt.substring(0, i));
      if (i < txt.length) {
        setTimeout(search_placeholder, 170);
        return ++i;
      }
    };
    return search_placeholder();
  });

  $(window).bind('SSO_profile_ico', function(e, id) {
    var height, ico;
    ico = $("#HEAD .menu .ico");
    height = parseInt(devicePixelRatio * ico.height());
    return ico.css({
      "background-image": "url(" + CONST.SSO.QINIU + "/" + id + "?imageView2/5/w/" + height + "/h/" + height + ")"
    });
  });

  $(window).bind('SSO_profile_submit', function(e, o) {
    return $("#HEAD .menu span").text(o.name);
  });

}).call(this);
